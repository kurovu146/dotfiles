# ==============================
# üåà Giao di·ªán & hi·ªÉn th·ªã
# ==============================
set -g mouse on                # B·∫≠t chu·ªôt (click ch·ªçn pane, copy, scroll)
set -g status on               # B·∫≠t thanh status
set -g history-limit 10000     # L∆∞u nhi·ªÅu d√≤ng l·ªãch s·ª≠ h∆°n
set -g base-index 1            # B·∫Øt ƒë·∫ßu index t·ª´ 1 (pane/window)
setw -g pane-base-index 1

# True color (24-bit)
set -g default-terminal "tmux-256color"
set-option -sa terminal-overrides ",xterm-256color:RGB"

# ==============================
# ‚öôÔ∏è T√πy ch·ªânh thao t√°c
# ==============================
# D·ªÖ d√πng h∆°n v·ªõi prefix = Ctrl + a
unbind C-b
set -g prefix C-a
bind C-a send-prefix
bind-key x kill-pane

# Chia c·ª≠a s·ªï nhanh
bind | split-window -h -c "#{pane_current_path}"
bind "\\" split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# Di chuy·ªÉn gi·ªØa c√°c pane
bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R

# Resize pane nhanh
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Reload config
bind r source-file ~/.tmux.conf \; display-message "‚úÖ Reloaded ~/.tmux.conf"

# ==============================
# ü™Ñ C·∫£i thi·ªán UX
# ==============================
set -g renumber-windows on
set-option -g set-titles on
set-option -g set-titles-string "#T"

# Copy mode: Vi-style
setw -g mode-keys vi

# Copy v·ªõi chu·ªôt
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "xclip -in -selection clipboard"

# Gi·ªØ session khi m·∫•t SSH
set -g detach-on-destroy off

# ==============================
# üíÑ Status bar (Powerline style)
# ==============================
set -g status-interval 5
set -g status-justify centre
set -g status-bg colour234
set -g status-fg colour137
set -g status-left-length 40
set -g status-right-length 150

# Tr√°i: t√™n session + c·ª≠a s·ªï
set -g status-left "#[fg=colour16,bg=colour39,bold] #S #[fg=colour39,bg=colour234,nobold,nounderscore,noitalics]ÓÇ∞"

# Gi·ªØa: danh s√°ch c·ª≠a s·ªï
setw -g window-status-format "#[fg=colour244,bg=colour234] #I:#W "
setw -g window-status-current-format "#[fg=colour234,bg=colour39,bold] #I:#W #[fg=colour39,bg=colour234,nobold,nounderscore,noitalics]ÓÇ∞"

# Ph·∫£i: th·ªùi gian & pin
set -g status-right "#[fg=colour39,bg=colour234]ÓÇ≤#[fg=colour234,bg=colour39,bold] #(date '+%Y-%m-%d %H:%M') "

# ==============================
# üß© Plugin (t√πy ch·ªçn: tpm)
# ==============================
# Clone TPM: https://github.com/tmux-plugins/tpm
# mkdir -p ~/.tmux/plugins && git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'  # L∆∞u/kh√¥i ph·ª•c session
set -g @plugin 'tmux-plugins/tmux-continuum'  # T·ª± ƒë·ªông l∆∞u session
set -g @plugin 'tmux-plugins/tmux-prefix-highlight' # Hi·ªÉn th·ªã prefix khi b·∫•m
set -g @plugin 'tmux-plugins/tmux-battery'

# Initialize TPM
run '~/.tmux/plugins/tpm/tpm'

